<!DOCTYPE html>
<html>
<head>
	<title></title>
	<style type="text/css">
		#lib-select{width:300px;}
	</style>
</head>
<body>
<canvas id="canvas"></canvas>
<div id="lib-select"></div>
</body>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
	var media={"status":0,"statusinfo":"","data":[{"mid":6,"medianame":"\u4eba\u6c11\u7f51","domain":"http:\/\/www.people.com.cn","langid":1,"mtypeid":1,"regionid":1,"summary":null,"uid":1,"region_type":"\u4e2d\u592e","region_classify":"\u65f6\u653f","original_rule":null,"column":[{"mid":6,"id":1,"name":"\u6559\u80b2","pid":0,"sid":0,"uid":1},{"mid":6,"id":2,"name":"\u65f6\u653f","pid":0,"sid":0,"uid":1},{"mid":6,"id":3,"name":"\u56fd\u9645","pid":0,"sid":0,"uid":1},{"mid":6,"id":80,"name":"\u519b\u4e8b","pid":0,"sid":0,"uid":1},{"mid":6,"id":81,"name":"\u8d22\u7ecf","pid":0,"sid":0,"uid":1},{"mid":6,"id":82,"name":"\u53cd\u8150","pid":0,"sid":0,"uid":1}]},{"mid":7,"medianame":"\u73af\u7403\u7f51","domain":"http:\/\/www.huanqiu.com","langid":1,"mtypeid":1,"regionid":1,"summary":null,"uid":1,"region_type":"\u4e2d\u592e","region_classify":"\u7efc\u5408\u5a92\u4f53","original_rule":null,"column":[{"mid":7,"id":1,"name":"\u56fd\u9645","pid":0,"sid":0,"uid":1},{"mid":7,"id":2,"name":"\u56fd\u5185","pid":0,"sid":0,"uid":1},{"mid":7,"id":3,"name":"\u519b\u4e8b","pid":0,"sid":0,"uid":1},{"mid":7,"id":4,"name":"\u53f0\u6d77","pid":0,"sid":0,"uid":1},{"mid":7,"id":5,"name":"\u8d22\u7ecf","pid":0,"sid":0,"uid":1},{"mid":7,"id":15,"name":"\u6d77\u5916\u770b\u4e2d\u56fd","pid":0,"sid":0,"uid":1}]},{"mid":21,"medianame":"\u4eba\u6c11\u653f\u534f\u7f51","domain":"http:\/\/www.rmzxb.com.cn","langid":1,"mtypeid":8,"regionid":1,"summary":null,"uid":1,"region_type":"\u4e2d\u592e","region_classify":"\u6cd5\u5f8b","original_rule":null,"column":[{"mid":21,"id":1,"name":"\u515a\u6d3e\u58f0\u97f3","pid":0,"sid":0,"uid":1},{"mid":21,"id":3,"name":"\u653f\u58f0\u653f\u60c5","pid":0,"sid":0,"uid":1},{"mid":21,"id":5,"name":"\u8981\u8bba","pid":0,"sid":0,"uid":1},{"mid":21,"id":6,"name":"\u653f\u534f\u534f\u5546","pid":0,"sid":0,"uid":1},{"mid":21,"id":13,"name":"\u8981\u95fb","pid":0,"sid":0,"uid":1}]},{"mid":26,"medianame":"\u4f9b\u7a3f\u5e73\u53f0","domain":"http:\/\/original.hubpd.com","langid":1,"mtypeid":1,"regionid":1,"summary":null,"uid":1,"region_type":"\u4e2d\u592e","region_classify":"\u7efc\u5408\u5a92\u4f53","original_rule":null,"column":[{"mid":26,"id":1,"name":"\u9ebb\u8fa3\u8d22\u7ecf","pid":0,"sid":0,"uid":1},{"mid":26,"id":3,"name":"\u65b0\u5730\u5e73\u7ebf","pid":0,"sid":0,"uid":1},{"mid":26,"id":4,"name":"\u534a\u4ea9\u65b9\u5858","pid":0,"sid":0,"uid":1},{"mid":26,"id":5,"name":"2050","pid":0,"sid":0,"uid":1},{"mid":26,"id":6,"name":"\u4e00\u79d2\u4e16\u754c","pid":0,"sid":0,"uid":1},{"mid":26,"id":7,"name":"\u51b7\u89c2\u5bdf","pid":0,"sid":0,"uid":1},{"mid":26,"id":8,"name":"\u4e00\u672c\u6b63\u7ecf","pid":0,"sid":0,"uid":1},{"mid":26,"id":9,"name":"\u6587\u827a\u4e5d\u5c40","pid":0,"sid":0,"uid":1},{"mid":26,"id":10,"name":"\u667a\u52c7\u65b0\u95fb","pid":0,"sid":0,"uid":1},{"mid":26,"id":11,"name":"\u5b66\u4e60\u5927\u56fd","pid":0,"sid":0,"uid":1},{"mid":26,"id":12,"name":"\u78b0\u78b0\u8bcd","pid":0,"sid":0,"uid":1},{"mid":26,"id":13,"name":"\u4fa0\u5ba2\u5c9b","pid":0,"sid":0,"uid":1}]},{"mid":30,"medianame":"\u56db\u5ddd\u5728\u7ebf","domain":"http:\/\/jy.scdaily.cn\/jyrd\/","langid":1,"mtypeid":1,"regionid":1,"summary":null,"uid":1,"region_type":"\u5730\u65b9","region_classify":"\u65f6\u653f","original_rule":null,"column":[{"mid":30,"id":1,"name":"\u6559\u80b2\u9891\u9053","pid":0,"sid":0,"uid":1}]},{"mid":31,"medianame":"\u515a\u5efa\u7f51","domain":"http:\/\/www.dangjian.com\/","langid":1,"mtypeid":7,"regionid":1,"summary":null,"uid":1,"region_type":"\u4e2d\u592e","region_classify":"\u653f\u52a1\u673a\u6784","original_rule":null,"column":[{"mid":31,"id":1,"name":"\u515a\u53f2\u6545\u4e8b","pid":0,"sid":0,"uid":1},{"mid":31,"id":11,"name":"\u611f\u6069","pid":0,"sid":0,"uid":1}]},{"mid":36,"medianame":"\u4e2d\u56fd\u4eba\u5927\u7f51","domain":"http:\/\/www.npc.gov.cn\/","langid":1,"mtypeid":8,"regionid":1,"summary":"\u4e2d\u56fd\u4eba\u5927\u7f51\u662f\u5168\u56fd\u4eba\u5927\u5e38\u59d4\u4f1a\u95e8\u6237\u7f51\u7ad9\uff0c\u7531\u5168\u56fd\u4eba\u5927\u5e38\u59d4\u4f1a\u529e\u516c\u5385\u4e3b\u529e\uff0c\u662f\u5168\u56fd\u4eba\u5927\u5e38\u59d4\u4f1a\u7684\u91cd\u8981\u8206\u8bba\u5a92\u4ecb\u3002","uid":1,"region_type":"\u4e2d\u592e","region_classify":"\u653f\u52a1\u673a\u6784","original_rule":null,"column":[{"mid":36,"id":2,"name":"\u5168\u56fd\u4eba\u5927\u4ee3\u8868\u4fe1\u606f","pid":0,"sid":0,"uid":1}]},{"mid":37,"medianame":"\u65b0\u534e\u7f51","domain":"http:\/\/www.news.cn\/","langid":1,"mtypeid":8,"regionid":1,"summary":null,"uid":1,"region_type":"\u4e2d\u592e","region_classify":"\u7efc\u5408\u5a92\u4f53","original_rule":null,"column":[{"mid":37,"id":1,"name":"\u65f6\u653f","pid":0,"sid":0,"uid":1},{"mid":37,"id":2,"name":"\u56fd\u9645","pid":0,"sid":0,"uid":1},{"mid":37,"id":3,"name":"\u6e2f\u6fb3","pid":0,"sid":0,"uid":1},{"mid":37,"id":4,"name":"\u519b\u4e8b","pid":0,"sid":0,"uid":1},{"mid":37,"id":46,"name":"\u4eba\u4e8b","pid":0,"sid":0,"uid":1},{"mid":37,"id":49,"name":"\u8d22\u7ecf","pid":0,"sid":0,"uid":1},{"mid":37,"id":67,"name":"\u91d1\u878d","pid":0,"sid":0,"uid":1}]},{"mid":38,"medianame":"\u5317\u4eac\u5e02\u653f\u52a1\u6570\u636e\u8d44\u6e90\u7f51","domain":"http:\/\/www.bjdata.gov.cn\/","langid":1,"mtypeid":8,"regionid":1,"summary":null,"uid":1,"region_type":"\u4e2d\u592e","region_classify":"\u793e\u79d1","original_rule":null,"column":[{"mid":38,"id":1,"name":"\u5e02\u6559\u59d4","pid":0,"sid":0,"uid":1},{"mid":38,"id":2,"name":"\u5e02\u79d1\u59d4","pid":0,"sid":0,"uid":1}]},{"mid":39,"medianame":"\u592e\u5e7f\u7f51","domain":"http:\/\/www.cnr.cn\/","langid":1,"mtypeid":1,"regionid":1,"summary":null,"uid":1,"region_type":"\u4e2d\u592e","region_classify":"\u7efc\u5408\u5a92\u4f53","original_rule":null,"column":[{"mid":39,"id":1,"name":"\u8d22\u7ecf","pid":0,"sid":0,"uid":1},{"mid":39,"id":10,"name":"\u519b\u4e8b","pid":0,"sid":0,"uid":1}]},{"mid":40,"medianame":"\u6c7d\u8f66\u62a5\u7f51","domain":"http:\/\/www.cnautonews.com\/","langid":1,"mtypeid":6,"regionid":2,"summary":"\u6c7d\u8f66\u56fd\u5185\u5317\u4eac\u5e02","uid":1,"region_type":" ","region_classify":"\u4ea7\u4e1a","original_rule":null,"column":[{"mid":40,"id":1,"name":"\u6c7d\u8f66\u96f6\u90e8\u4ef6","pid":0,"sid":0,"uid":1}]},{"mid":41,"medianame":"\u6d4b\u8bd52","domain":"www.cesi.com","langid":1,"mtypeid":1,"regionid":2,"summary":"","uid":1,"region_type":"\u4e2d\u592e","region_classify":"1","original_rule":"\u5eca\u574a\u5a92\u4f53\uff0c\u5eca\u574a\u4f20\u5a92\uff0c\u5eca\u574a\u5a92\u4f53\u7f51","column":[{"mid":41,"id":1,"name":"new node1","pid":0,"sid":0,"uid":1}]},{"mid":43,"medianame":"\u5fae\u4fe1","domain":"wx","langid":1,"mtypeid":1,"regionid":1,"summary":null,"uid":1,"region_type":"\u4e2d\u592e","region_classify":"1","original_rule":null,"column":[]},{"mid":44,"medianame":"\u6d4b\u8bd5www","domain":"www.baidu.com","langid":1,"mtypeid":1,"regionid":18,"summary":"czxczx","uid":1,"region_type":"\u4e2d\u592e","region_classify":"1","original_rule":"","column":[{"mid":44,"id":1,"name":"\u680f\u76ee1","pid":0,"sid":0,"uid":1},{"mid":44,"id":3,"name":"\u680f\u76ee2","pid":0,"sid":0,"uid":1}]}]}
	var data=media.data;
	var canvas=document.createElement("canvas");
	var ctx=canvas.getContext("2d");
	ctx.font = '400 14px/2 Microsoft YaHei, sans-serif';
	var l=0;
	var libwidth=$("#lib-select").width();
	$.map(data,function(ele,i){
		ele.width=ctx.measureText(ele.medianame).width+14.1;
		l=l+ele.width;
		ele.allwidth=l;
		ele.top=(Math.floor(l/libwidth)+1)*35;
		return ele;
	})

	console.log(data)
</script>
</html>